# restit
Turn simple command scripts into a custom rest api sensor.

# Basic Workflow
<pre>1. Git clone this source code.
2. Create your set of scripts that output "Value String" for each line of output. (Each line is a separate sensor)
3. Edit main.csv using the syntax described below.
4. Build the source code and the installer package
5. Install your rest api sensor as root on each linux host that you want it to run on.
</pre>

<pre>main.csv syntax :
Category;Type;schedule_frequency_seconds;script_file;
</pre>

# Important rules
<pre>- Script can be max 7900bytes long
- Script must always output "VALUE STRING" per line.
- Each line is a (sub)sensor.</pre>

# Build the application and create the package bundle
<pre>make
make bundle</pre>

# Cleanup
<pre>make clean</pre>

# Install the package on linux hosts
The package file will look like restit.Distro.CPUarch.timestamp.sh
At this time install it as root if you want to autocreate a systemd service.
<pre>Install example :
./restit.SLES.x86_64.20230908.sh
Uninstall :
./restit.SLES.x86_64.20230908.sh -u
</pre>

# The installer bundle
The bundle file is a deployment script intended for easy deployment on linux hosts.
It is generated by the "make bundle" statement. The package is collected in a tar.gz and is then uuencoded plus embedded in the script.
Only use the script on systems with the same linux distribution and release version. The idea is that you can build your install bundle for each type of system to make automating your deployments easier.

# REST API listener
By default the rest api will be listening on port 40480, but this can be adapted in the config file.
You can connect to it using the http protocol.

<br />curl http://127.0.0.1:40480

